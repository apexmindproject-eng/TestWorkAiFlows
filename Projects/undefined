document.addEventListener('DOMContentLoaded', () => {
  // Select all gallery thumbnails
  const thumbnails = document.querySelectorAll('.gallery-thumbnail');

  // Create modal elements
  const modal = document.createElement('div');
  modal.id = 'image-modal';
  modal.style.display = 'none';
  modal.style.position = 'fixed';
  modal.style.top = '0';
  modal.style.left = '0';
  modal.style.width = '100%';
  modal.style.height = '100%';
  modal.style.backgroundColor = 'rgba(0,0,0,0.8)';
  modal.style.justifyContent = 'center';
  modal.style.alignItems = 'center';
  modal.style.zIndex = '1000';

  const modalImg = document.createElement('img');
  modalImg.style.maxWidth = '90%';
  modalImg.style.maxHeight = '90%';
  modalImg.alt = 'Expanded kitten image';

  modal.appendChild(modalImg);
  document.body.appendChild(modal);

  // Show modal with clicked image
  function showModal(src, alt) {
    modalImg.src = src;
    modalImg.alt = alt;
    modal.style.display = 'flex';
    // Focus modal for accessibility
    modal.setAttribute('tabindex', '-1');
    modal.focus();
  }

  // Hide modal
  function hideModal() {
    modal.style.display = 'none';
    modalImg.src = '';
    modalImg.alt = '';
  }

  // Add click event to each thumbnail
  thumbnails.forEach(thumb => {
    thumb.addEventListener('click', () => {
      showModal(thumb.src, thumb.alt);
    });
    thumb.addEventListener('keypress', (event) => {
      if(event.key === 'Enter' || event.key === ' ') {
        event.preventDefault();
        showModal(thumb.src, thumb.alt);
      }
    });
  });

  // Close modal when clicking outside the image
  modal.addEventListener('click', (event) => {
    if(event.target === modal) {
      hideModal();
    }
  });

  // Close modal on escape key
  document.addEventListener('keydown', (event) => {
    if(event.key === 'Escape' && modal.style.display === 'flex') {
      hideModal();
    }
  });
});